<!DOCTYPE html>
<html lang="zh-CN" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的作业 - 智慧助教平台</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="assets/css/style.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: { /* From Design Spec */ slate: { 900: '#1e293b', 800: '#2d3748', 700: '#374151', 600: '#4b5563', 100: '#f1f5f9', 300: '#cbd5e1', 400: '#94a3b8', 500: '#64748b', 200:'#e2e8f0' }, blue: { 400: '#60a5fa', 300: '#93c5fd', 600: '#2563eb', 700: '#1d4ed8', 500: '#3b82f6' }, green: { 500: '#22c55e', 600: '#16a34a'}, yellow: {500: '#eab308'}, red: {500: '#ef4444'} }
                }
            }
        }
    </script>
</head>
<body class="bg-slate-900 text-slate-100 antialiased">

    <div class="flex h-screen">
        <aside class="w-64 bg-slate-800 p-6 space-y-6 border-r border-slate-700 flex flex-col justify-between">
            <div>
                <div class="text-center mb-10">
                    <div class="inline-block p-3 bg-blue-600 rounded-full mb-2">
                        <i class="fas fa-user-graduate fa-2x text-white"></i>
                    </div>
                    <h1 class="text-xl font-semibold text-white">智慧助教平台</h1>
                    <span class="text-xs text-slate-400">学生端</span>
                </div>
                <nav class="space-y-2">
                    <a href="student_dashboard.html" class="flex items-center space-x-3 px-4 py-2.5 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">
                        <i class="fas fa-home fa-fw"></i>
                        <span>我的主页</span>
                    </a>
                    <a href="student_course_resources.html" class="flex items-center space-x-3 px-4 py-2.5 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">
                        <i class="fas fa-folder-open fa-fw"></i>
                        <span>课程资源</span>
                    </a>
                    <a href="student_assignment_submission.html" class="flex items-center space-x-3 px-4 py-2.5 bg-blue-600 text-white rounded-lg shadow-md">
                        <i class="fas fa-file-pen fa-fw"></i>
                        <span>我的作业</span>
                    </a>
                    <a href="student_grades_feedback.html" class="flex items-center space-x-3 px-4 py-2.5 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">
                        <i class="fas fa-clipboard-check fa-fw"></i>
                        <span>成绩与反馈</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 px-4 py-2.5 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">
                        <i class="fas fa-calendar-alt fa-fw"></i>
                        <span>我的课表</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 px-4 py-2.5 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">
                        <i class="fas fa-comments fa-fw"></i>
                        <span>课堂互动</span>
                         <span class="text-xs bg-yellow-500 text-slate-900 px-1.5 py-0.5 rounded-full">V1.1</span>
                    </a>
                </nav>
            </div>
             <div class="space-y-2 border-t border-slate-700 pt-6">
                 <a href="#" class="flex items-center space-x-3 px-4 py-2.5 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">
                    <i class="fas fa-user-cog fa-fw"></i>
                    <span>账户设置</span>
                </a>
                <a href="login.html" class="flex items-center space-x-3 px-4 py-2.5 text-slate-300 hover:bg-red-600 hover:text-white rounded-lg transition-colors">
                    <i class="fas fa-sign-out-alt fa-fw"></i>
                    <span>退出登录</span>
                </a>
            </div>
        </aside>

        <main class="flex-1 p-6 md:p-8 overflow-y-auto bg-slate-900" id="assignmentSubmissionPage">
            <header class="mb-8 flex flex-col md:flex-row justify-between md:items-center">
                <div>
                    <h2 class="text-3xl font-bold text-white">我的作业</h2>
                    <p class="text-slate-400 mt-1">查看、提交和管理您的课程作业。</p>
                </div>
                 <div class="mt-4 md:mt-0">
                    <label for="assignmentCourseSelect" class="sr-only">选择课程</label>
                    <select id="assignmentCourseSelect" name="assignmentCourseSelect" class="py-2 px-3 bg-slate-700 border border-slate-600 rounded-md text-slate-100 focus:ring-blue-500 focus:border-blue-500 text-sm">
                        <option value="all_courses">所有课程的作业</option>
                        <option value="soil_waste" selected>土壤与固体废物监测</option>
                        <option value="air_pollution">大气污染控制</option>
                    </select>
                </div>
            </header>

            <div id="assignmentContainer">
                <section id="studentAssignmentListView">
                     <div class="mb-6 border-b border-slate-700">
                        <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                            <a href="#" id="tabTodo" class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-400" aria-current="page">
                                <i class="fas fa-hourglass-start mr-1.5"></i> 待完成 (2)
                            </a>
                            <a href="#" id="tabSubmitted" class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-transparent text-slate-400 hover:text-slate-200 hover:border-slate-400">
                                <i class="fas fa-check-circle mr-1.5"></i> 已提交 (5)
                            </a>
                            <a href="#" id="tabGraded" class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-transparent text-slate-400 hover:text-slate-200 hover:border-slate-400">
                                <i class="fas fa-award mr-1.5"></i> 已批阅 (3)
                            </a>
                        </nav>
                    </div>

                    <div id="assignmentListContent" class="space-y-5">
                        <div class="bg-slate-800 rounded-lg shadow-lg overflow-hidden">
                            <div class="p-5 md:p-6">
                                <div class="flex flex-col sm:flex-row justify-between sm:items-start mb-2">
                                    <div>
                                        <h4 class="text-lg font-semibold text-slate-100 mb-1">第一章：课后思考题</h4>
                                        <p class="text-xs text-slate-400">课程：土壤与固体废物监测 (王老师)</p>
                                    </div>
                                    <span class="mt-2 sm:mt-0 text-sm font-medium px-3 py-1 rounded-full bg-red-600 text-white">截止: 明天 23:59</span>
                                </div>
                                <p class="text-sm text-slate-300 mb-3 leading-relaxed">请完成教材第一章课后思考题1-5题，以Word文档形式提交。注意图文结合。</p>
                                <div class="flex flex-wrap items-center gap-x-4 gap-y-2">
                                    <button data-assignment-id="assign001" class="view-submission-details-btn bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 px-4 rounded-md flex items-center">
                                        <i class="fas fa-arrow-right mr-2"></i> 查看并提交作业
                                    </button>
                                    <div class="text-xs text-slate-500">
                                        <i class="fas fa-paperclip mr-1"></i> 附件: 思考题参考格式.docx
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-slate-800 rounded-lg shadow-lg overflow-hidden border-l-4 border-yellow-500">
                            <div class="p-5 md:p-6">
                                <div class="flex flex-col sm:flex-row justify-between sm:items-start mb-2">
                                     <div>
                                        <h4 class="text-lg font-semibold text-slate-100 mb-1">实验预习：重金属快速检测法</h4>
                                        <p class="text-xs text-slate-400">课程：土壤与固体废物监测 (王老师)</p>
                                    </div>
                                    <span class="mt-2 sm:mt-0 text-sm font-medium px-3 py-1 rounded-full bg-yellow-600 text-white">已逾期!</span>
                                </div>
                                <p class="text-sm text-slate-300 mb-3 leading-relaxed">观看预习视频，并简述实验步骤和注意事项。允许补交，但会记录迟交。</p>
                                <div class="flex flex-wrap items-center gap-x-4 gap-y-2">
                                    <button data-assignment-id="assign002" class="view-submission-details-btn bg-yellow-500 hover:bg-yellow-600 text-slate-900 text-sm font-medium py-2 px-4 rounded-md flex items-center">
                                        <i class="fas fa-arrow-right mr-2"></i> 补交作业
                                    </button>
                                     <div class="text-xs text-slate-500">
                                        <i class="fas fa-video mr-1"></i> 附件: 预习视频链接
                                    </div>
                                </div>
                            </div>
                        </div>
                         </div>
                    <nav class="mt-8 flex items-center justify-between border-t border-slate-700 pt-6" aria-label="Pagination">
                         <div class="hidden sm:block"><p class="text-sm text-slate-400">共 <span class="font-medium">2</span> 个待完成作业</p></div>
                        <div class="flex-1 flex justify-between sm:justify-end space-x-2">
                             <a href="#" class="relative inline-flex items-center px-3 py-2 rounded-md border border-slate-600 bg-slate-700 text-sm font-medium text-slate-300 hover:bg-slate-600 opacity-50 cursor-not-allowed">上一页</a>
                             <a href="#" class="relative inline-flex items-center px-3 py-2 rounded-md border border-slate-600 bg-slate-700 text-sm font-medium text-slate-300 hover:bg-slate-600 opacity-50 cursor-not-allowed">下一页</a>
                        </div>
                    </nav>
                </section>

                <section id="assignmentSubmissionDetailView" class="hidden bg-slate-800 p-6 md:p-8 rounded-lg shadow-xl">
                    <div class="flex justify-between items-center mb-6 pb-4 border-b border-slate-700">
                        <div>
                            <button id="backToAssignmentListBtnStudent" class="text-slate-400 hover:text-slate-200 mr-3 text-sm">
                                <i class="fas fa-arrow-left mr-1"></i> 返回作业列表
                            </button>
                            <h3 id="submissionAssignmentTitle" class="text-2xl font-semibold text-white inline">第一章：课后思考题</h3>
                        </div>
                        <span id="submissionStatusBadge" class="text-sm font-medium px-3 py-1 rounded-full bg-red-600 text-white">待提交</span>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2 space-y-5">
                            <div>
                                <h4 class="text-lg font-semibold text-slate-200 mb-1">作业要求:</h4>
                                <p id="submissionInstructions" class="text-sm text-slate-300 bg-slate-700 p-3 rounded-md leading-relaxed">
                                    请完成教材第一章课后思考题1-5题，以Word文档形式提交。注意图文结合。
                                    <br>评分标准：内容完整性 (40%)，分析深度 (30%)，格式规范 (20%)，创新性 (10%)。
                                </p>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-slate-200 mb-1">相关附件 (来自老师):</h4>
                                <div class="space-y-2">
                                    <a href="#" class="flex items-center space-x-2 p-2 bg-slate-700 hover:bg-slate-600 rounded-md text-sm w-fit">
                                        <i class="far fa-file-word text-blue-400"></i>
                                        <span class="text-slate-200">思考题参考格式.docx</span>
                                        <i class="fas fa-download text-slate-400 ml-2"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="lg:col-span-1 space-y-4">
                            <div class="bg-slate-700 p-4 rounded-lg">
                                <p class="text-sm text-slate-300">课程: <span id="submissionCourse" class="font-medium text-slate-100">土壤与固体废物监测</span></p>
                                <p class="text-sm text-slate-300">教师: <span id="submissionTeacher" class="font-medium text-slate-100">王老师</span></p>
                                <p class="text-sm text-slate-300">截止日期: <span id="submissionDueDate" class="font-medium text-red-400">明天 23:59 (2025-05-20)</span></p>
                                <p class="text-sm text-slate-300">满分: <span id="submissionMaxScore" class="font-medium text-slate-100">100分</span></p>
                            </div>
                        </div>
                    </div>

                    <div id="submissionUploadArea" class="mt-8 pt-6 border-t border-slate-700">
                        <h4 class="text-xl font-semibold text-white mb-3">提交我的作业</h4>
                        <form id="fileUploadForm" class="space-y-4">
                            <div>
                                <label for="studentSubmissionFile" class="block text-sm font-medium text-slate-300 mb-1">上传文件 <span class="text-red-400">*</span></label>
                                <div class="mt-1 flex justify-center items-center px-6 pt-5 pb-6 border-2 border-slate-600 border-dashed rounded-md">
                                    <div class="space-y-1 text-center">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-slate-500 mx-auto"></i>
                                        <div class="flex text-sm text-slate-400">
                                            <label for="studentFile" class="relative cursor-pointer bg-slate-700 rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-slate-800 focus-within:ring-blue-500 px-1">
                                                <span>选择文件</span>
                                                <input id="studentFile" name="studentFile" type="file" class="sr-only" required>
                                            </label>
                                            <p class="pl-1">或拖拽文件到此处</p>
                                        </div>
                                        <p class="text-xs text-slate-500">支持 DOCX, PDF, ZIP 等. 最大 20MB.</p>
                                    </div>
                                </div>
                                <div id="studentUploadedFileDisplay" class="mt-2 text-sm text-slate-300"></div>
                            </div>
                             <div>
                                <label for="submissionNotes" class="block text-sm font-medium text-slate-300 mb-1">备注 (可选)</label>
                                <textarea id="submissionNotes" name="submissionNotes" rows="2" class="w-full bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 py-2 px-3 focus:ring-blue-500 focus:border-blue-500" placeholder="给老师的留言，例如：关于第三题的补充说明..."></textarea>
                            </div>
                            <div class="pt-2">
                                <button type="submit" class="w-full sm:w-auto inline-flex justify-center items-center rounded-md border border-transparent shadow-sm px-8 py-2.5 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-slate-800 focus:ring-green-500">
                                    <i class="fas fa-check-circle mr-2"></i> 确认提交
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <div id="alreadySubmittedView" class="hidden mt-8 pt-6 border-t border-slate-700">
                        <h4 class="text-xl font-semibold text-white mb-3">我提交的作业</h4>
                         <div class="p-4 bg-slate-700 rounded-md">
                            <div class="flex items-center space-x-3 mb-2">
                                <i class="far fa-file-alt fa-lg text-blue-400"></i>
                                <span id="submittedFileName" class="text-sm font-medium text-slate-100">我的作业报告.pdf</span>
                                <span id="submittedFileSize" class="text-xs text-slate-400">(1.8MB)</span>
                            </div>
                            <p class="text-xs text-slate-400">提交时间: <span id="submittedTimestamp">2025-05-10 14:30</span></p>
                            <p id="submittedNotesDisplay" class="mt-2 text-sm text-slate-300 border-l-2 border-slate-500 pl-2 italic"></p>
                            <button id="resubmitButton" class="mt-3 text-sm bg-yellow-600 hover:bg-yellow-700 text-slate-900 font-medium py-1.5 px-3 rounded-md flex items-center">
                                <i class="fas fa-redo mr-1.5"></i> 重新提交 (若允许)
                            </button>
                        </div>
                    </div>

                </section>
            </div>
        </main>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const assignmentListView = document.getElementById('studentAssignmentListView');
            const assignmentSubmissionDetailView = document.getElementById('assignmentSubmissionDetailView');
            const backToAssignmentListBtnStudent = document.getElementById('backToAssignmentListBtnStudent');
            const viewSubmissionDetailsBtns = document.querySelectorAll('.view-submission-details-btn');
            
            // Mock data for assignment details (in a real app, this would come from a click event or API)
            const assignmentsData = {
                "assign001": {
                    title: "第一章：课后思考题",
                    course: "土壤与固体废物监测",
                    teacher: "王老师",
                    dueDate: "明天 23:59 (2025-05-20)",
                    maxScore: "100分",
                    instructions: "请完成教材第一章课后思考题1-5题，以Word文档形式提交。注意图文结合。\n评分标准：内容完整性 (40%)，分析深度 (30%)，格式规范 (20%)，创新性 (10%)。",
                    status: "待提交", // or "已提交", "已批阅", "已逾期"
                    statusBadgeClass: "bg-red-600 text-white",
                    submittedFile: null // or { name: "我的作业报告.pdf", size: "1.8MB", timestamp: "2025-05-10 14:30", notes: "关于第三题的补充说明" }
                },
                "assign002": {
                    title: "实验预习：重金属快速检测法",
                    course: "土壤与固体废物监测",
                    teacher: "王老师",
                    dueDate: "2025-05-18 23:59",
                    maxScore: "20分 (计入平时分)",
                    instructions: "观看预习视频，并简述实验步骤和注意事项。允许补交，但会记录迟交。",
                    status: "已逾期",
                    statusBadgeClass: "bg-yellow-600 text-white",
                    submittedFile: null
                }
                // Add more assignment data as needed
            };

            function showDetailView(assignmentId) {
                const data = assignmentsData[assignmentId];
                if (!data) return;

                document.getElementById('submissionAssignmentTitle').textContent = data.title;
                document.getElementById('submissionStatusBadge').textContent = data.status;
                document.getElementById('submissionStatusBadge').className = `text-sm font-medium px-3 py-1 rounded-full ${data.statusBadgeClass}`;
                document.getElementById('submissionInstructions').textContent = data.instructions;
                document.getElementById('submissionCourse').textContent = data.course;
                document.getElementById('submissionTeacher').textContent = data.teacher;
                document.getElementById('submissionDueDate').textContent = data.dueDate;
                document.getElementById('submissionMaxScore').textContent = data.maxScore;

                const uploadArea = document.getElementById('submissionUploadArea');
                const submittedView = document.getElementById('alreadySubmittedView');

                if (data.submittedFile) {
                    uploadArea.classList.add('hidden');
                    submittedView.classList.remove('hidden');
                    document.getElementById('submittedFileName').textContent = data.submittedFile.name;
                    document.getElementById('submittedFileSize').textContent = `(${data.submittedFile.size})`;
                    document.getElementById('submittedTimestamp').textContent = data.submittedFile.timestamp;
                    const notesDisplay = document.getElementById('submittedNotesDisplay');
                    if(data.submittedFile.notes) {
                        notesDisplay.textContent = `备注: ${data.submittedFile.notes}`;
                        notesDisplay.classList.remove('hidden');
                    } else {
                        notesDisplay.classList.add('hidden');
                    }
                    // Logic for enabling/disabling resubmit button based on deadline/teacher settings
                    // document.getElementById('resubmitButton').disabled = (data.status === "已批阅" || isPastDeadlineAndNotAllowed);
                } else {
                    uploadArea.classList.remove('hidden');
                    submittedView.classList.add('hidden');
                    document.getElementById('fileUploadForm').reset(); // Reset form for new submission
                    document.getElementById('studentUploadedFileDisplay').textContent = '';
                }

                assignmentListView.classList.add('hidden');
                assignmentSubmissionDetailView.classList.remove('hidden');
            }

            function showListView() {
                assignmentSubmissionDetailView.classList.add('hidden');
                assignmentListView.classList.remove('hidden');
            }

            viewSubmissionDetailsBtns.forEach(button => {
                button.addEventListener('click', (e) => {
                    const assignmentId = e.currentTarget.dataset.assignmentId;
                    showDetailView(assignmentId);
                });
            });

            if (backToAssignmentListBtnStudent) {
                backToAssignmentListBtnStudent.addEventListener('click', showListView);
            }
            
            // File input display
            const studentFileInput = document.getElementById('studentFile');
            const studentFileDisplay = document.getElementById('studentUploadedFileDisplay');
            if(studentFileInput && studentFileDisplay) {
                studentFileInput.addEventListener('change', function() {
                    if (this.files.length > 0) {
                        studentFileDisplay.innerHTML = `<i class="fas fa-check-circle text-green-500 mr-1"></i>已选择文件: ${this.files[0].name} (${(this.files[0].size / 1024 / 1024).toFixed(2)} MB)`;
                    } else {
                        studentFileDisplay.textContent = '';
                    }
                });
            }
            
            // Tab switching logic for student assignments
            const assignmentTabs = [
                { id: 'tabTodo', content: '待完成作业内容...' }, // Placeholder, real app would filter list
                { id: 'tabSubmitted', content: '已提交作业内容...' },
                { id: 'tabGraded', content: '已批阅作业内容...' }
            ];
            const assignmentListContent = document.getElementById('assignmentListContent');

            assignmentTabs.forEach(tabInfo => {
                const tabElement = document.getElementById(tabInfo.id);
                if (tabElement) {
                    tabElement.addEventListener('click', (event) => {
                        event.preventDefault();
                        assignmentTabs.forEach(t => {
                            document.getElementById(t.id).classList.remove('border-blue-500', 'text-blue-400');
                            document.getElementById(t.id).classList.add('border-transparent', 'text-slate-400', 'hover:text-slate-200', 'hover:border-slate-400');
                        });
                        tabElement.classList.add('border-blue-500', 'text-blue-400');
                        tabElement.classList.remove('border-transparent', 'text-slate-400', 'hover:text-slate-200', 'hover:border-slate-400');
                        // In a real app, you would filter/reload the assignmentListContent here.
                        // For this prototype, the content is static.
                        // assignmentListContent.innerHTML = `<p class="text-slate-400 p-4">${tabInfo.content}</p>`;
                        console.log(`Switched to tab: ${tabInfo.id}`);
                    });
                }
            });


        });
    </script>
    <script src="assets/js/main.js"></script>
</body>
</html>